{% extends 'base.html.twig' %}

{% block title %}SkinExchange - Accueil{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
{% endblock %}

{% block body %}
    <!-- Bannière -->
    <div class="container mt-4">
        <div class="banner text-center">
            <h1>SkinExchange</h1>
            <p>Découvrez, créez et partagez vos propres skins pour Counter-Strike 2 dans une communauté passionnée.</p>
        </div>
    </div>

    <!-- Section des Catégories -->
    <nav class="navbar navbar-expand-lg navbar-light mx-auto w-75 second-navbar">
        <div class="container justify-content-center">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav mx-auto">
                    <!-- Knives Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="knivesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Knives
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="knivesDropdown">
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#butterfly">Butterfly Knife</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#karambit">Karambit</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#bayonet">Bayonet</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#m9-bayonet">M9 Bayonet</a></li>
                        </ul>
                    </li>

                    <!-- Gloves Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="glovesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Gloves
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="glovesDropdown">
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#sport">Sport Gloves</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#hand-wraps">Hand Wraps</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#moto">Moto Gloves</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#specialist">Specialist Gloves</a></li>
                        </ul>
                    </li>

                    <!-- Rifles Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="riflesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Rifles
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="riflesDropdown">
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#ak47">AK-47</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#m4a1">M4A1-S</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#aug">AUG</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#sg553">SG 553</a></li>
                        </ul>
                    </li>

                    <!-- Pistols Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="pistolsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Pistols
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="pistolsDropdown">
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#glock">Glock-18</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#usp">USP-S</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#deagle">Desert Eagle</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#p250">P250</a></li>
                        </ul>
                    </li>

                    <!-- Mid-Tier Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="midTierDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Mid-Tier
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="midTierDropdown">
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#mp7">MP7</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#mp9">MP9</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#mac10">MAC-10</a></li>
                            <li><a class="dropdown-item" href="{{ path('app_home') }}#ump45">UMP-45</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Section des publications et Featured -->
    <section class="container">
        <div class="row">
            <!-- Dernières publications -->
            <article class="col-lg-8">
                <div id="carouselExampleIndicators" class="carousel slide mb-4" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                    </div>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="{{ asset('image/Skin-jtpnz-p250.jpg') }}" class="d-block w-100" alt="Skin 1">
                            <div class="carousel-caption d-none d-md-block">
                                <h5>Skin 1</h5>
                                <p>Description of Skin 1.</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="{{ asset('image/Skin-jtpnz-m4a1s.jpg') }}" class="d-block w-100" alt="Skin 2">
                            <div class="carousel-caption d-none d-md-block">
                                <h5>Skin 2</h5>
                                <p>Description of Skin 2.</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="{{ asset('image/Skin-jtpnz-ak47.jpeg') }}" class="d-block w-100" alt="Skin 3">
                            <div class="carousel-caption d-none d-md-block">
                                <h5>Skin 3</h5>
                                <p>Description of Skin 3.</p>
                            </div>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>

                <h4 class="mb-4">Derniers Articles</h4>
                
                {% for article in latest_articles %}
                    <div class="d-flex mb-4">
                        {% if article.image %}
                            <img src="{{ asset('uploads/images/' ~ article.image) }}" alt="{{ article.titre }}" class="post-image me-3">
                        {% else %}
                            <img src="{{ asset('image/default-article.jpg') }}" alt="Image par défaut" class="post-image me-3">
                        {% endif %}
                        <div>
                            <small class="text-muted">
                                {{ article.createdAt|date('d/m/Y') }} | 
                                Par {{ article.user.username }} |
                                {% for categorie in article.categories %}
                                    {{ categorie.nom }}{% if not loop.last %}, {% endif %}
                                {% endfor %}
                            </small>
                            <h5>{{ article.titre }}</h5>
                            <p>{{ article.content|striptags|slice(0, 150) }}...</p>
                            <a href="{{ path('article_show', {'id': article.id}) }}" class="btn btn-primary">Lire la suite</a>
                        </div>
                    </div>
                {% else %}
                    <p>Aucun article n'a été publié pour le moment.</p>
                {% endfor %}
            </article>
        </div>
    </section>

    <!-- Section Skins Populaires -->
    <section class="container mt-5">
        <h4 class="mb-4 popular-title">Skins Populaires</h4>
        <div class="row">
            {% for i in 1..6 %}
                <article class="col-12 col-sm-6 col-lg-4 mb-4">
                    <div class="card">
                        <img src="{{ asset('image/Skin-jtpnz-ak47.jpeg') }}" class="card-img-top" alt="Skin populaire {{ i }}">
                        <div class="card-body">
                            <h5 class="card-title">Skin Populaire {{ i }}</h5>
                            <p class="card-text">Description du skin populaire {{ i }}</p>
                            <a href="#" class="btn btn-primary">Voir plus</a>
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>
    </section>
{% endblock %}
